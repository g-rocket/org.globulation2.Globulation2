id: org.globulation2.Globulation2
runtime: org.freedesktop.Platform
runtime-version: '24.08'
sdk: org.freedesktop.Sdk
command: glob2
modules:
  - 'shared-modules/python2.7/python-2.7.json'
  - name: scons
    cleanup: ['*']
    no-autogen: true
    sources:
      - type: archive
        url: http://downloads.sourceforge.net/project/scons/scons/2.4.1/scons-2.4.1.tar.gz
        sha256: 8fc4f42928c69bcbb33e1be94b646f2c700b659693fabc778c192d4d22f753a7
        #url: https://netactuate.dl.sourceforge.net/project/scons/scons/3.1.2/scons-3.1.2.tar.gz
        #sha256: 7801f3f62f654528e272df780be10c0e9337e897650b62ddcee9f39fde13f8fb
        #url: https://pilotfiber.dl.sourceforge.net/project/scons/scons/4.9.1/SCons-4.9.1.tar.gz
        #sha256: 8fc4f42928c69bcbb33e1be94b646f2c700b659693fabc778c192d4d22f753a7
      - type: file
        path: scons-Makefile
        dest-filename: Makefile
  - 'shared-modules/SDL/SDL-1.2.15.json'
  - 'shared-modules/glu/glu-9.json'
  - name: Globulation 2
    buildsystem: simple
    build-commands:
      - python2 "$(which scons)" BINDIR=/app/bin INSTALLDIR=/app/share
      - python2 "$(which scons)" install
    sources:
      - type: archive
        url: http://dl.sv.nongnu.org/releases/glob2/0.9.4/glob2-0.9.4.4.tar.gz
        sha256: 0f4d898ec6b05ce27b4a12ef242cc26571304b90d2509932a4743c71311314b8
    #modules:
      # - 'shared-modules/python2.7/python-2.7.json'
      # - 'shared-modules/SDL/sdl12-compat.json'
      # - 'shared-modules/SDL/SDL-1.2.15.json'
      # - 'shared-modules/glu/glu-9.json'

finish-args:
    - --share=ipc
    - --socket=x11
    - --device=dri
    #- --device=input
    - --socket=pulseaudio
    #- --filesystem=host
    #- --persist=.powder
